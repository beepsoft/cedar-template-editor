<div ng-if="model !== undefined" class="item-root element-root">

  <div class="elementTotalContent ">
    <div ng-show="$root.isArray(model)">
      <div class="spreadsheetViewDetector"></div>
      <div class="spreadsheetViewContainer"></div>
    </div>


    <!-- have an array with at least one element -->
    <div ng-if="$root.isArray(model)" class="element" ng-repeat="m in model"
        ng-class="['element-{{$index}}']">

      <div class="row">
        <div class="col-sm-10">

             <span style="{{getNestingMargin(element, 0)}}"><button type="button"
                 ng-click="toggleExpanded()"
                 class="add">
               <i ng-class="{'fa fa-minus-square' : isExpanded(), 'fa fa-plus-square' : !isExpanded()}"></i></button>{{$root.schemaOf(element)._ui.title}}</span>
        </div>
        <div class="col-sm-2">

          <span>
            <button type="button"
                ng-click="addElement()"
                class="add">
              <i class="fa fa-plus-circle"></i>
            </button>
          </span>


        <span>
          <button type="button"
              ng-click="removeElement($index)"
              class="remove">
            <i class="fa fa-times-circle"></i>
          </button>
        </span>


        </div>
      </div>

      <div ng-if="isExpanded()" ui-sortable="$root.sortableOptions" ng-model="$root.schemaOf(element)._ui.order"
          class="sortable-container">
        <div ng-repeat="key in $root.schemaOf(element)['_ui']['order']">
          <div ng-if="$root.propertiesOf(element)[key]">
            <cedar-runtime-nested-element key="key"
                field="$root.propertiesOf(element)[key]"
                model="m[key]"
                remove-child="removeChild"
                rename-child-key="renameChildKey"
                is-edit-data="isEditData"
                depth="depth+1">
            </cedar-runtime-nested-element>
          </div>
        </div>
      </div>
    </div>

    <!-- not an array -->
    <div ng-if="!$root.isArray(model)" class="element">

      <div class="row">

        <div class="col-sm-9 ">
          <span style="{{getNestingMargin(element, 0)}}">
            <button type="button" ng-click="toggleExpanded()" class="add">
              <i ng-class="{'fa fa-minus-square' : isExpanded(), 'fa fa-plus-square' : !isExpanded()}"></i></button>
            {{$root.schemaOf(element)._ui.title}}
          </span>
        </div>
        <div class="col-sm-3">

        </div>
      </div>

      <div ng-if="isExpanded()" class="element only-element"
          ui-sortable="$root.sortableOptions"
          ng-model="element._ui.order">
        <div ng-repeat="key in $root.schemaOf(element)['_ui']['order']">
          <div ng-if="$root.propertiesOf(element)[key]">
            <cedar-runtime-nested-element key="key"
                field="$root.propertiesOf(element)[key]"
                model="model[key]"
                remove-child="removeChild"
                rename-child-key="renameChildKey"
                is-edit-data="isEditData"
                depth="depth+1">
            </cedar-runtime-nested-element>
          </div>
        </div>
      </div>
    </div>


  </div>
</div>

