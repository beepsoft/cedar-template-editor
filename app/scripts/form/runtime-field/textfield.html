<div class="row" ng-class="{'isActive' : isActive(index)}"  id="{{getId(index)}}">
  <div class="col-sm-3">
    <div class="pull-right title" ng-class="{'isActive' : isActive(index)}">{{getTitle()}}</div>
  </div>
  <div class="col-sm-9">

    <form name="textfield-edit-form" ng-submit="onSubmit()">

    <!--Regular field-->
    <div ng-if="!$root.hasValueConstraint($root.schemaOf(field)._valueConstraints)" class="has-no-constraint">

      <input type="text"  ng-click="setActive(index)"
          class="form-control has-success has-feedback"
          ng-change="setDefaultValueIfEmpty(model)"
          ng-class="{'isActive' : isActive(index), 'required': $root.schemaOf(field)._valueConstraints.requiredValue}"
          placeholder="enter answer"
          aria-label="{{$root.schemaOf(field)._ui.description}}"
          ng-model="valueElement['@value']"/>

    </div>


    <!--Field whose values have been constrained using controlled terms -->
    <div ng-if="$root.hasValueConstraint($root.schemaOf(field)._valueConstraints)" ng-init="initializeControlledField()"
        class="has-constraint autocomplete-label-wrapper" ng-class="{'has-selected': valueElement['@value'].label}">
      <ui-select ng-change="updateModelFromUIControlledField()" ng-model="valueElement['@value']" theme="bootstrap"
          close-on-select="true"
          aria-label="{{$root.schemaOf(field)._ui.description}}">
        <ui-select-match placeholder="">{{$select.selected.label}}</ui-select-match>
        <ui-select-choices ui-disable-choice="option.label == 'No Results...'"
            refresh="$root.updateFieldAutocomplete($root.schemaOf(field), $select.search)" refresh-delay="200"
            repeat="option in $root.autocompleteResultsCache[$root.schemaOf(field)['@id']]['results'] | propsFilter: {label: $select.search} | limitTo:500">
          <div ng-bind-html="option.label | highlight: $select.search"></div>
        </ui-select-choices>
      </ui-select>
    </div>

    <!-- show whether text entry is valid or not -->
    <div class="input-indicator-icons" ng-include="'scripts/form/partials/indicator-icons.partial.html'"></div>

    <!-- add + and x for add and delete -->
    <div ng-if="isMultiple()" class="more-input-wrapper " ng-include="'scripts/form/partials/more-input-buttons.partial.html'"
        ng-show="!$root.schemaOf(field).maxItems || $root.schemaOf(field).maxItems > 1 || ($root.schemaOf(field).maxItems ==1 && $root.schemaOf(field).minItems ==0)"></div>

      <button ng-if="isActive(index)" type="submit" ng-click="onSubmit(index)"
          class="btn btn-save confirm" >OK
      </button>
    </form>
  </div>

</div>
