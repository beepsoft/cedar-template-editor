<div class="item-root field-root">

  <!-- field content  -->
  <div class="elementTotalContent visible" style="position:relative">


    <div class="fields text-fields">

      <!-- for zero cardinality just show the field title because the valueArray is empty  -->
      <div ng-if="valueArray.length == 0">
        <div class="row isRowInactive" id="{{getLocator(index)}}">
          <div class="col-sm-3">
            <div class="leader"></div>
            <div class="title" ng-click="addMoreInput()">
              {{getTitle(field)}}
            </div>
          </div>
        </div>
      </div>


      <div ng-if="showMultiple('spreadsheet')">
      <div class="spreadsheetViewDetector"></div>
      <div class="spreadsheetViewContainer"></div>
      </div>


      <!-- show a paged list of fields from the valueArray -->
      <div ng-if="showMultiple('paged') && valueArray.length > 0" ng-model="index">

        <!-- inactive,not being edited at the moment -->
        <div class="row isRowInactive" ng-if="!isActive(index)" id="{{getLocator(index)}}">
          <div class="col-sm-3 col-xs-* ">
            <div class="leader"></div>

            <div ng-click="setActive(index, true)" class="title isInactive" ng-mouseenter="hover=true"
                ng-mouseleave="hover=false">
              {{getTitle(field)}}
            </div>

          </div>
          <div class="col-sm-9 col-xs-* answer" ng-click="setActive(index, true)">
            <div class="originalContent" ng-include="getFieldUrl()"></div>
          </div>
        </div>


        <!-- active --->
        <div class="row isActive" ng-if="isActive(index)" id="{{getLocator(index)}}">
          <div class="col-sm-3">
            <div class="leader"></div>

            <div class="title isActive">
              <span ng-if="isMultipleCardinality()" style="font-size:smaller;padding-right:5px;">{{index+1}}.</span>{{getTitle(field)}}
            </div>

          </div>
          <div class="col-sm-9 answer">

            <div class="row">

              <!-- pager -->
              <div class="col-xs-8 " style="font-size:smaller;padding-top:6px;user-select:none;">
                <a ng-click="firstPage();$event.stopPropagation()">
                  <i class="fa fa-angle-double-left"></i>
                </a>
                <a style="padding:0 5px;" ng-if="index>0" ng-click="previousPage();$event.stopPropagation()">
                  <i class="fa fa-angle-left"></i>
                </a>
                <span ng-repeat="(i, valueElement) in valueArray">
                    <a ng-if="i >= pageMin && i <= pageMax"
                        ng-click="selectPage(i);">

                      <span ng-if="i===index" style="font-weight:bold">{{i+1}}</span>
                      <span ng-if="i!==index" style="font-size:small">{{i+1}}</span>
                    </a>
                  </span>
                <a style="padding:0 5px;" ng-if="index+1<valueArray.length"
                    ng-click="nextPage();$event.stopPropagation()">
                  <i class="fa fa-angle-right"></i>
                </a>
                <a ng-if="index+1<valueArray.length" ng-click="lastPage();$event.stopPropagation()">
                  <i class="fa fa-angle-double-right"></i>
                </a>
              </div>

              <!-- toolbar-->
              <div class="col-xs-4  pull-right toolbar">
                <button type="button" class="remove pull-right" ng-click="removeInput(index)"
                    ng-if="model.length > field.minItems"
                    tooltip="{{'GENERIC.Remove' | translate}}"
                    tooltip-trigger
                    tooltip-animation="false"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-trash"></i>
                </button>

                <button type="button" class=" remove pull-right"
                    ng-if="isActive(index)"
                    tooltip="{{'GENERIC.Close' | translate}}"
                    ng-click="setActive(index, false)">
                  <i class="fa fa-remove "></i>
                </button>

                <button ng-if="getDescription(field).length > 0" type="button" class=" question  pull-right"
                    tooltip="{{(getDescription(field) || 'GENERIC.Help') | translate}}"
                    tooltip-trigger
                    tooltip-animation="true"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-question-circle"></i>
                </button>

                <button type="button" class=" add  pull-right" ng-click="addMoreInput();$event.stopPropagation()"
                    ng-if="isMultipleCardinality() && (!field.maxItems || model.length < field.maxItems )"
                    tooltip="{{'GENERIC.Add' | translate}}"
                    tooltip-trigger
                    tooltip-animation="false"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-plus-circle"></i>
                </button>

                <button ng-if="isMultipleCardinality()" type="button" class=" remove pull-right"
                    ng-if="isActive(index)"
                    tooltip="Page"
                    ng-click="toggleMultiple()">
                  <i ng-if="showMultiple('paged')" class="fa fa-toggle-on "></i>
                  <i ng-if="showMultiple('expanded')" class="fa fa-toggle-off "></i>
                </button>
              </div>
            </div>

            <form name="field-edit-form-{{index}}" ng-submit="onSubmit(index)">
              <div class="originalContent" ng-include="getFieldUrl()"></div>
              <button type="submit" class="btn btn-save confirm active" translate>GENERIC.Ok</button>
              <label class="submit-info" translate>GENERIC.Submit</label>
            </form>

          </div>
        </div>
      </div>


      <!-- show an expanded list of fields from the valueArray -->
      <div ng-if="showMultiple('expanded')" ng-repeat="(index, valueElement) in valueArray">

        <!-- inactive,not being edited at the moment -->
        <div class="row isRowInactive" ng-if="!isActive(index)" id="{{getLocator(index)}}">
          <div class="col-sm-3 col-xs-* ">
            <div class="leader"></div>

            <div ng-click="setActive(index, true)" class="title isInactive" ng-mouseenter="hover=true"
                ng-mouseleave="hover=false">

              <span ng-if="isMultipleCardinality()" style="font-size:smaller;padding-right:5px;">{{index+1}}.</span>{{getTitle(field)}}
            </div>

          </div>
          <div class="col-sm-9 col-xs-* answer" ng-click="setActive(index, true)">
            <div class="originalContent" ng-include="getFieldUrl()"></div>
          </div>
        </div>


        <!-- active --->
        <div class="row isActive" ng-if="isActive(index)" id="{{getLocator(index)}}">
          <div class="col-sm-3">
            <div class="leader"></div>

            <div class="title isActive">
              <span ng-if="isMultipleCardinality()" style="font-size:smaller;padding-right:5px;">{{index+1}}.</span>{{getTitle(field)}}
            </div>

          </div>
          <div class="col-sm-9 answer">

            <div class="row">
              <div class="col-xs-4 col-sm-4 pull-right toolbar">

                <button type="button" class="remove pull-right" ng-click="removeInput(index)"
                    ng-if="model.length > field.minItems"
                    tooltip="{{'GENERIC.Remove' | translate}}"
                    tooltip-trigger
                    tooltip-animation="false"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-trash"></i>
                </button>

                <button type="button" class=" remove pull-right"
                    ng-if="isActive(index)"
                    tooltip="{{'GENERIC.Close' | translate}}"
                    ng-click="setActive(index, false)">
                  <i class="fa fa-remove "></i>
                </button>

                <button ng-if="getDescription(field).length > 0" type="button" class=" question  pull-right"
                    tooltip="{{(getDescription(field) || 'GENERIC.Help') | translate}}"
                    tooltip-trigger
                    tooltip-animation="true"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-question-circle"></i>
                </button>

                <button type="button" class=" add  pull-right" ng-click="addMoreInput()"
                    ng-if="isMultipleCardinality() && (!field.maxItems || model.length < field.maxItems )"
                    tooltip="{{'GENERIC.Add' | translate}}"
                    tooltip-trigger
                    tooltip-animation="false"
                    tooltip-placement="top"
                    data-toggle="tooltip">
                  <i class="fa fa-plus-circle"></i>
                </button>

                <button ng-if="isMultipleCardinality()" type="button" class=" remove pull-right"
                    ng-if="isActive(index)"
                    tooltip="Page"
                    ng-click="toggleMultiple()">

                  <i ng-if="showMultiple('paged')" class="fa fa-toggle-on "></i>
                  <i ng-if="showMultiple('expanded')" class="fa fa-toggle-off "></i>
                </button>

              </div>
            </div>


            <div ng-if="isPreviousStatic()">
              <div ng-if="isRichText(previous)" ng-bind-html="$root.getUnescapedContent(previous)"></div>
              <div ng-if="isYouTube(previous)">
                <figure>
                  <div fit-vids ng-bind-html="getYouTubeEmbedFrame(previous)"></div>
                </figure>
              </div>
            </div>


            <form name="field-edit-form-{{index}}" ng-submit="onSubmit(index)">
              <div class="originalContent" ng-include="getFieldUrl()"></div>
              <button type="submit" class="btn btn-save confirm active" translate>GENERIC.Ok</button>
              <label class="submit-info" translate>GENERIC.Submit</label>
            </form>

          </div>
        </div>

        <!-- actively being edited -->
        <!--<div ng-if="isActive(index)"  class="active-container"  ng-style="{'left' : getNestingStyle(), 'width': getPageWidth() }">-->
        <!--<div class="row" >-->
        <!--<div class="col-xs-4 col-sm-4 pull-right toolbar">-->

        <!--<button type="button" class="remove pull-right" ng-click="removeInput(index)"-->
        <!--ng-if="model.length > field.minItems"-->
        <!--tooltip="{{'GENERIC.Remove' | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="false"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-trash"></i>-->
        <!--</button>-->

        <!--<button type="button" class=" remove pull-right"-->
        <!--ng-if="isActive(index)"-->
        <!--tooltip="{{'GENERIC.Close' | translate}}"-->
        <!--ng-click="setActive(index, false)">-->
        <!--<i class="fa fa-remove "></i>-->
        <!--</button>-->

        <!--<button ng-if="getDescription(field).length > 0" type="button" class=" question  pull-right"-->
        <!--tooltip="{{(getDescription(field) || 'GENERIC.Help') | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="true"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-question-circle"></i>-->
        <!--</button>-->

        <!--<button type="button" class=" add  pull-right" ng-click="addMoreInput()"-->
        <!--ng-if="isMultipleCardinality() && (!field.maxItems || model.length < field.maxItems )"-->
        <!--tooltip="{{'GENERIC.Add' | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="false"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-plus-circle"></i>-->
        <!--</button>-->

        <!--</div>-->
        <!--</div>-->
        <!--<div class="row isActive" id="{{getLocator(index)}}">-->
        <!--<div class="col-xs-12 col-sm-12">-->
        <!--<div ng-click="setActive(index, true)" class="title ">-->
        <!--<span ng-if="isMultipleCardinality()" class="count">{{index+1}}.</span>-->
        <!--{{getTitle(field)}}-->
        <!--</div>-->
        <!--<div ng-if="isPreviousStatic()" >-->
        <!--<div ng-if="isImage(previous)" >-->
        <!--<figure>-->
        <!--<img ng-src="{{getContent(previous)}}" no-image alt="{{getTitle(previous)}}"-->
        <!--type="image/png" width="100%"/>-->
        <!--<figcaption><label>{{getTitle(previous)}}</label></figcaption>-->
        <!--</figure>-->
        <!--</div>-->
        <!--<div ng-if="isRichText(previous)" ng-bind-html="$root.getUnescapedContent(previous)"></div>-->
        <!--<div ng-if="isYouTube(previous)">-->
        <!--<figure>-->
        <!--<div fit-vids ng-bind-html="getYouTubeEmbedFrame(previous)"></div>-->
        <!--</figure>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <!--<div class="row isActive" ng-if="isActive(index)">-->
        <!--<div class="col-xs-12 col-sm-12">-->
        <!--<form name="field-edit-form-{{index}}" ng-submit="onSubmit(index)">-->
        <!--<div class="originalContent" ng-include="getFieldUrl()"></div>-->
        <!--<button type="submit" class="btn btn-save confirm active" translate>GENERIC.Ok</button>-->
        <!--<label class="submit-info" translate>GENERIC.Submit</label>-->
        <!--</form>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->


        <!--&lt;!&ndash; actively being edited &ndash;&gt;-->
        <!--<div ng-if="isActive(index)"  class="active-container"  ng-style="{'left' : getNestingStyle(), 'width': getPageWidth() }">-->
        <!--<div class="row" >-->
        <!--<div class="col-xs-4 col-sm-4 pull-right toolbar">-->

        <!--<button type="button" class="remove pull-right" ng-click="removeInput(index)"-->
        <!--ng-if="model.length > field.minItems"-->
        <!--tooltip="{{'GENERIC.Remove' | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="false"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-trash"></i>-->
        <!--</button>-->

        <!--<button type="button" class=" remove pull-right"-->
        <!--ng-if="isActive(index)"-->
        <!--tooltip="{{'GENERIC.Close' | translate}}"-->
        <!--ng-click="setActive(index, false)">-->
        <!--<i class="fa fa-remove "></i>-->
        <!--</button>-->

        <!--<button ng-if="getDescription(field).length > 0" type="button" class=" question  pull-right"-->
        <!--tooltip="{{(getDescription(field) || 'GENERIC.Help') | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="true"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-question-circle"></i>-->
        <!--</button>-->

        <!--<button type="button" class=" add  pull-right" ng-click="addMoreInput()"-->
        <!--ng-if="isMultipleCardinality() && (!field.maxItems || model.length < field.maxItems )"-->
        <!--tooltip="{{'GENERIC.Add' | translate}}"-->
        <!--tooltip-trigger-->
        <!--tooltip-animation="false"-->
        <!--tooltip-placement="top"-->
        <!--data-toggle="tooltip">-->
        <!--<i class="fa fa-plus-circle"></i>-->
        <!--</button>-->

        <!--</div>-->
        <!--</div>-->
        <!--<div class="row isActive" id="{{getLocator(index)}}">-->
        <!--<div class="col-xs-12 col-sm-12">-->
        <!--<div ng-click="setActive(index, true)" class="title ">-->
        <!--<span ng-if="isMultipleCardinality()" class="count">{{index+1}}.</span>-->
        <!--{{getTitle(field)}}-->
        <!--</div>-->
        <!--<div ng-if="isPreviousStatic()" >-->
        <!--<div ng-if="isImage(previous)" >-->
        <!--<figure>-->
        <!--<img ng-src="{{getContent(previous)}}" no-image alt="{{getTitle(previous)}}"-->
        <!--type="image/png" width="100%"/>-->
        <!--<figcaption><label>{{getTitle(previous)}}</label></figcaption>-->
        <!--</figure>-->
        <!--</div>-->
        <!--<div ng-if="isRichText(previous)" ng-bind-html="$root.getUnescapedContent(previous)"></div>-->
        <!--<div ng-if="isYouTube(previous)">-->
        <!--<figure>-->
        <!--<div fit-vids ng-bind-html="getYouTubeEmbedFrame(previous)"></div>-->
        <!--</figure>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <!--<div class="row isActive" ng-if="isActive(index)">-->
        <!--<div class="col-xs-12 col-sm-12">-->
        <!--<form name="field-edit-form-{{index}}" ng-submit="onSubmit(index)">-->
        <!--<div class="originalContent" ng-include="getFieldUrl()"></div>-->
        <!--<button type="submit" class="btn btn-save confirm active" translate>GENERIC.Ok</button>-->
        <!--<label class="submit-info" translate>GENERIC.Submit</label>-->
        <!--</form>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

      </div>

      <!-- all error messages for this field  -->
      <div class="errors" ng-if="errorMessages">
        <div class="alert alert-danger" ng-repeat="message in errorMessages">{{message}}</div>
      </div>
    </div>
  </div>
</div>
