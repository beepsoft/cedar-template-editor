language: node_js
node_js:
- '5.1'
branches:
  only:
  - develop
notifications:
  email:
    recipients:
    - martin.oconnor@stanford.edu
    on_success: never
    on_failure: always
before_install: 
before_script:
- export CEDAR_HOST=staging.metadatacenter.net
- export CEDAR_PROFILE=server
- export CEDAR_ANALYTICS_KEY=false
- export CEDAR_SELENIUM_SERVER_JAR=2.50.1-server.jar
- export CEDAR_CHROME_DRIVER=2.21-x64-chromedriver
- export CHROME_BIN=chromium-browser
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
script:
- npm install
- npm install -g gulp
- npm install -g protractor
- ./node_modules/selenium-standalone/bin/selenium-standalone install
- gulp e2e
env:
  global:
  - secure: c4lVfeZHE8+tZ53eQG/7NyHuXrlDHsCDwynXet8f9iKlpwFqFC9o48tTa8nfUV4UB+4VZF4Ry/C8QZYf0dg2lsHk1lcEmDJG0/7tS7KHh1OOBi92+N3LYnEnyM+LzW0HT5QHlyqtn8JNaVYN1Lbaj0v0H6kXVrxg+ldo+OYwMWYjPmg04G4eP2T23MskkgK9/vHuGZwzJEQDl2pP2VGgTQKqmF/0wBKDGqb6kMbKzp906X5AcieXnHoxTSfSMeiZl5uCKghqT494A4gm5p93EwUaQPVMWQgxt/NQLY01I4Do8VJ2zNOoU5lDfJ7I/LwljatOWHdyBFlMU6oOws9QSkaXLzQdcbXB42Mj+b0D7Au1a4jxFlxwqBzwmgGhpJelsTh+6q82U/2Rfnv0O7ERebj9Sd2Wk6mP/7DeJzxEl5UMWnB9h0VkRqWXsd0QhSNnvDcZQjnwFsuip0uaEVK495XDTk5mNhotudvIWt4tpprZRQNQMnc/1Rolr+iE8P/oqNaP4ghNKWvJWcFtYFQ2SsgJRs33OqpfaP0EMQg6bf1XG/f4dbld4tRqNFEM8DlTrUmCLRin2dV0vMYuBtXjBDwTI8D6FJk1eXuANjqaI65o0GgHuxkt+9pmZOXMNEeMnZEqjX1nvqOHoCCFEgisvZWW5hhYUDhvnBj3aIAufrE=
  - secure: c47vhX81rlDPkRfYlM37G41CTa7JIWSKBzzfppikbcuq9k8BV107yzqYRCG38ndOE3gZxauMdxDdd8jW1yjL3dauA6TKPDDAyqBmXolGxX8RNQBzrFa63q8nLpJn2dP2j9r5AHbhXvS9Ksp4+SYbu2e2u4O9eoTOzW1ZKqDDnF1X+zv3+ivGUYbA+ecDOObCh5xzJ/5eQ4t6s2o+M4SzQ2dQQwzNqrUdYVdjneLrfr5BECAUBer8huQ2+YRgFhN5jmAP5gfP2x6UOMB5q6Z1/uFEtVThrP9RVn1TIrRw0tUilqxvD1p+761x7EY7eA7NHZPyuXrrESpjrUBBkP+WTUJ8NIbDhGISaqYtK7MxLfQDzIKH6i5QypcSb5bF6HV+KdnHZgHr4k65N+m6nQmlnVNJWU98Q/AXmYrf1jGJ9OoL8Ax4xwqGvjrtZVydhmaYuItoqgzi+1hwsvnghMrWJHcFQperYz5UnxgCDgmKemqKEaftf9QevMyOQTnlql92B4MU0Iq/dNlj78qVJ8CwTaoFP97NHRw9hwvc8kAgA6swvV8UAqugD53bMU8CgLqwOCoKGIhoBSwRHv6isEhh9og7G6J59BjkUWsuAnrNDFun850HJHbw4XcaFCeF6CLZja2V+Db5YNPd4A4jUrUjjyqqBFKLidpYXRtTbIXV4vQ=
  - secure: Wv+LO3joMnkXltoXbSf5dTYRvAdnNjaIOrXDSrJ9O8egS6eJNeBlZ1ZJ0OKAgl1JH3624zxVlpb37xJcnoHi96rP/loLw01SyvkqQIXhBesm/pb14AjybbEo3LX5ltC5yNk+rCjcm056SjjkoFAlnAm5E2yhmMW7Us+PNW0+mZciPEhN2BqaShC/9p2dVVurOuJQ6jfeKKYIOt5l6pMvnEu99EhYQAGU5dib263z3uKYkQwns+olVVcJUMBY2Ym0yEBZbzEgPTGpQ8uBU9d1oUXzaYqf7OolG6oz0K/ojpVYF62I3g7gDmnDMnH9OpH8bpV2eERm3t8HYlhwg1ZFuKTS73EDn4RoLH3JldnospwUMAcfh53BHMN/PBTj8R+txGQQ/9Uf5l8h09oT8GgRduHiz/uRt2Ji5BLC3HpT/qfka7SzG6bW3qy62X3NFPXDA4CuYCzXbcnFqH0FeXqA1zNtK0YBweDYemLZRkswOU94yq2gkmse7AQ0umQRKXRnwe9O7iaBFSXgt19T42LoqOOUVhry9faBCe/LvhvgQMi+/OGDKFaMTT8Rz7MGe+cZi1evIBOmdDU/TYRa1F8fgubx0ujjnSrBq05bC60H9+SOYopZkvzSSmW37ZexyW69MDnjSppE6/fQT/p/bWcZsy/Pg8x6JcfmWmFiYPvr9Y4=
  - secure: Gx0mITQ7pYDB6i5z7H33eDx4Rn6TbOUSYheA/2JA1EC+ByNqXUQ1JYcAh5BnUDKL/VKzXUzUptGyjDYxv5wZ353hKs8zf9mEOmnVV8p48U4VSOJbRj0Mk/CLtvgWV+0IdccRe3PbG3pm5tGPUlvz1Kc8MU7twzwmRzHVpROnIg3ZHUhIBq4rC0uyOPiaWjl8IPO5yooDN4raZ/21KamKl/l+loe8FwyuERbsHorSfwqz7dfcOoj9jkb9oGnHqKjIbRSuXiE8nK4MJdfKBlmKspXQAgeiv57gO8Qb9h4Ijg91wy3CW7H0PN8pVOfsicuRVebL/M7JAOzzjMNJnVkUbKh1BCi72h/WzXE2qs42IqVCilyMLR+ku6+h/OFWyW202RC2yDNHagetZPv+f9mTYqIni73OdMncFCnRWOqKGCXymPZgxoGZINb8DjUy4VfBmKn9Of4aJ3Qc3H6vDO1rG7qdzkq7vb16UhYZedanA52MN8UsCjZXH/LomjsCfHhQzHFaOPRsQ3epzZVPYEGbMjWye8JPA/3DLHKMR0XU+F/IGcoX9/aztbWDYhhqitSmwVFbBOa9VrTm+7WddvaJG3TEDbkAbzeDijPvjvf17Z2ZB5fmJpnRtJRdXwHYFucmTww/sj6L0onlwFpUydbigzj+Eo1MI1JX6hHQqurcDcE=
  - secure: eM+NW+chwsXhVx0W8ZyrX8MxzbKIcPD00+IoCrRfgg9vRN3PzdvZP8iI3owd4lxP6orphChBAC8kaGjCYz6nYCXuT7ASpgbv6H244F+vFP5Iq3snkupnDZh0V3sRbTDdujKTaN1rY5/5ghtzmxcFv/d3Sw0mRehTBXfYlT+4vyKDtWszcD9qn/lth4O7aW0RotMP2Pb8ArU+V8Zqm4p74Ppxmbs4LoqnMkUpb/DvxTie52H8614EN37uSw1RmCVuRiSOvS0mJNHyRdP8WNEZfcrkUZns+heT2mtUFZQodCNAFw2Fb7lZ2TiMAYpNdpJE/dkSh9LB49afN/s5yjiCeyKe95UHaWak7RywocH9FGCCB21SnAF+2/e6QxFSKkFHRnhxO2T8YLppKDb+kj/qA64g8ZPttZnQjs01P/Wy6CgokDgBHZPqACBqx6doiNM0+0wzfHlhBk0wOyQ5Gzt+K3t+PxgIpT2aGm+NZ3c8aAqL1OV7Dlgu5oCcJGUh9rBRAJYihtFpQ6fWu/UVP1YLdXCWnrkIohY9U9q8CBI2lVZ+dvMu99yTrpZLUnjxk/ytS8/5QW1cHrM0rXpqIGlTRdVV/BPGCOF4FEwEmenf/RGsKgMS0Y3mAa2nKoZBxTRpge7QVU3ySMJILRvISJOTMwaLpE2zjarHf6CYFpP+nXk=
  - secure: KGKvCLI365n72yRSA3etp9TKmBtsT0i9LLtduMZxoVR3Q+aD3twbl0cVvNuRu/2mEb3r4x1THxiEXkHJpyyu/8Xy1TDC23BX8+UNcCVXgaAbQ796Cbl8w5WrBnB5oYNW2icFxltwyc37YCAIzaRdYA5rYGsxRIAQRN4A0sEUSrfr00LeKIIkXfLa+q18Ux+0vkDkZrknfuKfp7J1NAB5WMs/e5p9VJp0VjSKwkR6CXBLPB37EsDnLk0o1vqRItdlvPog4QSWuKPk6heVMG+OopTSK4ESWHBMoRyczH9qw3kFUN/EntGRvFgaVROgorcmVraBEf/BAFhy552ATgCOPjol58zeYj4c/kXLcKKIOeqKxIs2KGnS2F6J6FYT/w7TF3tf2XlV1ctWPmCO427bN1+1kJgUvJ71+g16SvLZ74YMubsSkraXcut4MWzcjQnAAu6bkKn47ApUMdZ8D8hCkNSIvRtNIKP+tuNLkeDwJRFCButxVI/OcyanAJDGVGEGdN1+3uO1hxJuBQEzjfEy8YV2R0uqDOX8d8Cxhoc50kDF4/2JWI8N05PNR4JCytbBum8kopiHIctH2WdM6u7fa3ZnTC/3yK3rjFd6vR1Xxa2/WYMvI+7w75QkFV6+iekdO2C0/0iVxwWAdbiFW75WieeFjr7eCcxqWLpkXMxefSQ=
